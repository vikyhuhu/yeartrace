下面是一份**完整、可直接丢进 Claude Code / Cursor / Copilot 进行实现的 PRD（Markdown 格式）**。
已**完整融合你的真实习惯数据、记录逻辑**，并且**第 6 章已按你的要求改为「时间轴 + 已完成可视化」，不再使用成就系统**。

你可以 **原封不动保存为 `PRD.md` 使用**。

---

````md
# 产品需求文档（PRD）

## 产品名称（暂定）
YearTrace（年度痕迹）

副标题：把努力留在时间里

---

## 1. 产品背景与目标

### 1.1 背景
用户希望记录个人长期挑战与习惯养成过程，用于：
- 日常记录
- 阶段回顾
- 年终复盘

与传统打卡类产品不同，本产品**不强调连续、不制造焦虑、不做排名**，仅负责真实记录“发生过的事”。

---

### 1.2 产品目标

- 记录长期习惯 / 挑战
- 所有记录可被追溯
- 以「时间轴 + 已完成痕迹」作为核心可视化
- 支持年度级别复盘

---

## 2. 产品定位

- 单人使用
- 轻量级 Web / 小程序
- 本地优先（可无登录）
- 不做社交、不做提醒、不做成就榜

---

## 3. 核心概念定义

### 3.1 任务（Task）
用户长期执行或约束自己的行为项。

### 3.2 记录（Log）
某一天与某个任务发生的真实行为。

---

## 4. 任务系统设计

### 4.1 任务类型（必须选择）

| 类型 | 描述 | 示例 |
|---|---|---|
| check | 完成即记录 | 早起、泡脚、早睡、冥想 |
| check+text | 完成需输入文本 | 读书 |
| number | 数值型记录 | 健身体重 |
| violation | 触犯才记录 | 忌冰 |

---

### 4.2 任务数据结构

```ts
Task {
  id: string
  name: string
  type: "check" | "check+text" | "number" | "violation"
  startDate: string
  endDate?: string
  color: string
  unit?: string
  initialValue?: number
  targetValue?: number
  status: "active" | "ended"
}
````

---

### 4.3 默认任务初始化（示例）

* 早起（check）｜2025-12-03
* 读书（check+text）｜2025-12-15
* 健身（number）｜2025-12-25｜54.2kg → 48kg
* 泡脚（check）｜2025-12-25
* 早睡（check）｜2026-01-01
* 忌冰（violation）｜2026-01-01
* 冥想（check）｜2026-01-14

---

## 5. 记录系统设计

### 5.1 记录数据结构

```ts
Log {
  id: string
  taskId: string
  date: string
  value?: number
  text?: string
  rating?: number
}
```

---

### 5.2 记录规则

* 所有任务均允许 miss
* 允许补录、修改、删除
* 不计算连续天数
* 不自动判定失败

---

## 6. 打卡体验设计（时间轴 + 已完成）

> 本产品的“游戏化”只体现在 **视觉反馈与时间占据感**。

---

### 6.1 设计原则

* 不使用成就 / 勋章 / 等级
* 每一次记录都会改变时间轴形态
* “页面越来越满”就是正反馈

---

### 6.2 首页结构（核心）

```
┌──────────────────────────┐
│ 今天 · YYYY/MM/DD        │
│ 时间轴（可横向滚动）     │
│ · · ● · · ● · · ·        │
│                          │
│ 今日任务                 │
│ [早起]   [已记录]        │
│ [读书]   [添加]          │
│ [健身]   [输入体重]      │
│ [忌冰]   [今日无]        │
└──────────────────────────┘
```

---

### 6.3 打卡即时反馈

当用户完成一次记录：

* 时间轴上该日期立即出现彩点
* 使用 0.3–0.5s 轻动画
* 文案仅一次、低存在感

示例文案：

* “记录已写入时间”
* “这一天被你留下了”

---

### 6.4 时间轴可视化规则

* 点 = 一次记录
* 颜色 = 任务
* 同日多点 = 多任务发生
* 稀疏 / 密集自然反映努力程度

---

## 7. 日历视图

### 7.1 功能

* 月视图 / 年视图
* 同一日期支持多个任务显示
* 点击日期查看详情

---

### 7.2 显示规则

| 状态   | 表现     |
| ---- | ------ |
| 已记录  | 实心彩点   |
| 历史记录 | 半透明    |
| 未记录  | 空白（不灰） |
| 触犯型  | ⚠️ 或斜纹 |

---

## 8. 任务详情页

### 8.1 通用信息

* 任务名称
* 开始时间
* 累计记录数
* 时间轴视图

---

### 8.2 不同类型展示

#### check / check+text

* 累计完成次数
* 时间分布

#### number（健身）

* 折线图（体重变化）
* 当前体重
* 距目标差值

#### violation

* 触犯总次数
* 时间点列表

---

## 9. 年度总览（核心卖点）

### 9.1 年度页面功能

* 一整年时间轴
* 支持按任务筛选
* 点击任意一天回看详情

---

### 9.2 设计目标

> 打开年度页时，用户能直观看到：
> “这一年，我真的留下些什么。”

---

## 10. 任务管理功能

* 新增任务
* 修改任务
* 手动结束任务
* 删除任务（需二次确认）
* 历史记录是否保留可选

---

## 11. 技术与实现建议

### 11.1 产品形态

* Web 优先（PWA）
* 小程序可后续封装

### 11.2 数据策略

* 本地存储（LocalStorage / IndexedDB）
* 支持导出 JSON / CSV

---

## 12. 明确不做的事情

* ❌ 连续打卡
* ❌ 成就系统
* ❌ 排行榜
* ❌ 强制提醒
* ❌ 社交功能

---

## 13. 产品一句话总结

这不是一个自律工具，
而是一个 **帮你在时间里留下真实努力痕迹的记录系统**。

```

---

### 下一步你可以直接做什么（建议顺序）

**在 Claude Code 里：**
1. 先实现 `Task / Log` 数据模型
2. 实现「首页 + 时间轴」
3. 再补「任务详情页」
4. 最后加「年度总览」

如果你愿意，我可以下一步**直接帮你拆成前端页面 + 组件清单**，或者**直接给你一套示例 JSON 数据 + UI 状态流**，让你写代码时几乎不用思考结构。
```
